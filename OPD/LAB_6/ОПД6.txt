	ORG 	0x0	; Инициализация векторов прерывания
V0: 	WORD 	$DEFAULT, 	0x180	; Вектор прерывания #0
V1: 	WORD 	$INT1, 		0x180	; Вектор прерывания #1
V2: 	WORD 	$INT2, 		0x180	; Вектор прерывания #2
V3: 	WORD 	$DEFAULT, 	0x180	; Вектор прерывания #3
V4: 	WORD 	$DEFAULT, 	0x180	; Вектор прерывания #4
V5: 	WORD 	$DEFAULT, 	0x180	; Вектор прерывания #5
V6: 	WORD 	$DEFAULT, 	0x180	; Вектор прерывания #6
V7: 	WORD 	$DEFAULT, 	0x180	; Вектор прерывания #7

	ORG 	0x13	; Адрес ячейки с X
X:	WORD 	0x5	; ОДЗ: X c [-41; 43]

START: 	DI
	CLA
	LD 	#1	; Разрешить прерывание и вектор #1
	OUT 	3	; 0x1 в MR КВУ-1
	LD 	#2	; Разрешить прерывание и вектор #2
	OUT 	5	; 0x2 в MR КВУ-2
	BR 	PROG

PROG:	DI
	CLA
	LD	$X

INTX:	DI		; Цикл
	INC
	INC
	PUSH
	SXTB
	CMP	#43	; Верхняя граница 0x2B
	BPL	MIN1
	CMP	#-41	; Нижняя граница 0xFFD7
	BMI	MIN1
	POP
	BR	BASEINC

MIN1:	POP
	LD	#-41

BASEINC: ST	X	; Сохранение X
	EI
	BR	INTX

INT1:	DI		; Прерывание сохранило содержимое PS
	NOP		; Отладочная точка останова (NOP/HLT)
	PUSH
	ADD 	X	; Умножение на -3 и прибавление 2
	ADD	X
	NEG
	ADD	#2
	OUT	2	; Запись в РДВУ-1
	POP		; Вернули AC назад
	NOP		; Отладочная точка останова (NOP/HLT)
	EI
	IRET		; Возврат из обработки прерывания

INT2:	DI		; Прерывание сохранило содержимое PS
	NOP		; Отладочная точка останова (NOP/HLT)
	PUSH
	CLA
	IN	4
	SXTB
	ADD	X
	PUSH
	NOP		; Отладочная точка останова (NOP/HLT)
	CMP	#43	; Верхняя граница
	BPL	MIN2
	CMP	#-41	; Нижняя граница
	BMI	MIN2
	POP
	BR	BASE

MIN2:	POP
	LD	#-41
	NOP		; Отладочная точка останова (NOP/HLT)

BASE:	ST	X	; Сохранение X
	POP
	EI

DEFAULT: IRET		; Возврат из обработки прерывания
	
	

============================
-128 <= -3X+2 <= 127
-130 <= -3X <= 125
-125 <= 3X <= 130
-41 <= X <= 43